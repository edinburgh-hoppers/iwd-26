{% assign nav-items = site.data.nav %}

<nav class="sticky-top mt-3">

  <div class="hamburger" id="hamburger">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <div class="nav-links">

    <div class="left">
      {% for item in nav-items %}
        {% if item.left %}
          <a href='{{ item.href }}' style='font-weight: bold'>{{ item.text }}</a>
        {% endif %}
      {% endfor %}
    </div>

    <div class="right">
      {% for item in nav-items %}
        {% if item.right %}
          <a href='{{ item.href }}' style='font-weight: bold'>{{ item.text }}</a>
        {% endif %}
      {% endfor %}
    </div>

  </div>

  <img src="{{ '/assets/img/hoppers-logo-nav.png' | relative_url }} ">

</nav>

<script>
  var threshold;
  var disabled = false;
  var nav = document.getElementsByTagName('nav')[0];
  var listener1, listener2;
  window.onload = function() {
    threshold = 0;
  }

  window.onscroll = function(){
    let currPos = document.getElementsByClassName('hero-section')[0].getBoundingClientRect().y;
    if(currPos < threshold){
      console.log("true")
      nav.style.backgroundColor = "#281973";

      document.querySelectorAll('nav a').forEach(e => {
        e.classList.add('with-background');
      //  listener1 = e.addEventListener("mouseenter", function( event ) {
      //     event.target.style.color = "#3c0494ff";
      // });
      // listener2 = e.addEventListener("mouseleave", function( event ) {
      //     event.target.style.color = "white";
      // });
    });
  }
    else{
      disabled = false;
      nav.style.backgroundColor = "transparent";
      document.querySelectorAll('nav a').forEach(e => e.classList.remove('with-background'));
      // listener1 = e.addEventListener("mouseenter", function( event ) {
      //     event.target.style.color = "#3c0494ff";
      // });
      // listener2 = e.addEventListener("mouseleave", function( event ) {
      //     event.target.style.color = "#3c0494ffe";
      // });
    }
  }

  // Hamburger toggle
    var hamburger = document.getElementById("hamburger");
    var left = document.querySelector(".left");
    var right = document.querySelector(".right");

    hamburger.addEventListener("click", function () {
      left.classList.toggle("mobile-open");
      right.classList.toggle("mobile-open");
      hamburger.classList.toggle("active");
    });

</script>
